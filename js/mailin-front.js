var captchaRes="",sibVerifyCallback=function(s){captchaRes=s;var e=sessionStorage.getItem("formIdRecapcha");if(captchaRes){var i=0;jQuery.each(jQuery(e).find("input[required=required]"),(function(){if(""==jQuery(this).val().trim()||"checkbox"==jQuery(this).attr("type")&&0==jQuery(this).prop("checked"))return i++,void jQuery(this).closest("form").find(".sib_msg_disp").html('<p class="sib-alert-message sib-alert-message-warning ">'+sibErrMsg.requiredField+"</p>").show()}))}0==i&&jQuery(e).trigger("submit")};jQuery(document).ready((function(){function s(s,e){var i=s||window.event,t=i.charCode||i.which;t=String.fromCharCode(t);var a=/[ +0-9()-]/;"date"==e&&(a=/[ 0-9-/]/),a.test(t)||(i.returnValue=!1,t=i.keyCode,i.preventDefault&&9!=t&&8!=t&&i.preventDefault())}jQuery(".sib_signup_form").find("input[required=required]").on("invalid",(function(){if(""==jQuery(this).val().trim()){var s=jQuery(this).closest("form").find('input[name="sib_form_alert_notice"]').val();this.setCustomValidity(s)}else this.setCustomValidity("")})),jQuery(document).on("submit","form",(function(s){if(jQuery(this).hasClass("sib_signup_form")){s.preventDefault();var e=jQuery(this).closest("form");jQuery.each(e.find(".sib-sms"),(function(){jQuery(this).val()!=jQuery(this).closest(".sib-sms-field").find('input[name="sib_SMS_prefix"]').val()||jQuery(this).prop("required")||jQuery(this).val("")}));var i=0,t=e.find(jQuery(".sib-multi-lists"));if(null!=t&&"required"==t.data("require")&&0==t.find("input:checked").length&&(i++,t.addClass("sib_error")),i>0)return void e.find(".sib_msg_disp").html('<p class="sib-alert-message sib-alert-message-warning ">'+sibErrMsg.requiredField+"</p>").show();if(i=0,jQuery.each(e.find('input[type="email"]'),(function(){/^([a-zA-Z0-9_.+-])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/i.test(jQuery(this).val())||i++})),i>0)return void e.find(".sib_msg_disp").html('<p class="sib-alert-message sib-alert-message-warning ">'+sibErrMsg.invalidMail+"</p>").show();if(i=0,jQuery.each(e.find(".sib-sms"),(function(){var s=jQuery(this).val();0==function(s){var e=(s=s.replace(/\b(0(?!\b))+/g,"")).replace(/( |\(|\)|\.|\-)/g,"");if(e.length>19||e.length<6||"+"!=e.charAt(0))return!1;return!0}(s)&&""!=s&&i++})),i>0)return void e.find(".sib_msg_disp").html('<p class="sib-alert-message sib-alert-message-warning ">'+sibErrMsg.invalidSMSFormat+"</p>").show();e.find(".sib_loader").show(),jQuery(".sib_msg_disp").hide();n=e.serializeArray();if(""!=captchaRes&&n.push({name:"g-recaptcha-response",value:captchaRes}),captchaRes="",jQuery(".sib-multi-lists").length){jQuery(".sib-interesting-lists").each((function(){n.push({name:"interestingLists[]",value:jQuery(this).val()})}))}var a=e.attr("action");e.addClass("sib_processing"),n.push({name:"security",value:ajax_sib_front_object.ajax_nonce}),jQuery.ajax({url:a,type:"POST",dataType:"json",data:n,success:function(s,i,t){if(jQuery(".sib_loader").hide(),jQuery(".sib-multi-lists").length&&jQuery(".sib-multi-lists").removeClass("sib_error"),"success"===s.status||"update"===s.status){var a='<p class="sib-alert-message sib-alert-message-success ">'+s.msg.successMsg+"</p>";e.find(".sib_msg_disp").html(a).show()}else if("failure"===s.status){a='<p class="sib-alert-message sib-alert-message-error ">'+s.msg.errorMsg+"</p>";e.find(".sib_msg_disp").html(a).show()}else if("already_exist"===s.status){a='<p class="sib-alert-message sib-alert-message-warning ">'+s.msg.existMsg+"</p>";e.find(".sib_msg_disp").html(a).show()}else if("invalid"===s.status){a='<p class="sib-alert-message sib-alert-message-error ">'+s.msg.invalidMsg+"</p>";e.find(".sib_msg_disp").html(a).show()}else if("gcaptchaEmpty"===s.status){a='<p class="sib-alert-message sib-alert-message-error ">'+s.msg+"</p>";e.find(".sib_msg_disp").html(a).show()}else if("gcaptchaFail"===s.status){a='<p class="sib-alert-message sib-alert-message-error ">'+s.msg+"</p>";e.find(".sib_msg_disp").html(a).show()}e[0].reset(),!s.redirect||"success"!==s.status&&"update"!==s.status||(window.location.href=s.redirect);var r=e.find(".sib-cflags").data("dial-code");if(r&&(e.find(".sib-sms").val("+"+r),e.find('input[name="sib_SMS_prefix"]').val("+"+r)),"undefined"!=typeof sendinblue){var n=e.find("input[name=email]").val(),u=e.serializeObject();"success"!==s.status&&"update"!==s.status&&"already_exist"!==s.status||sendinblue.identify(n,u)}jQuery(".sib-alert-message").delay(2e3).hide("slow"),e.removeClass("sib_processing"),"undefined"!=typeof grecaptcha&&grecaptcha.reset(gCaptchaSibWidget)},error:function(s,i,t){e.find(".sib_msg_disp").html(s).show(),"undefined"!=typeof grecaptcha&&grecaptcha.reset(gCaptchaSibWidget)}})}else{var r=jQuery(this).find("input[type=email]").val();if("undefined"!=typeof sendinblue&&null!=r&&/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(r)){var n=jQuery("input[type!=password]",this).serializeObject();sendinblue.identify(r,n)}}})),jQuery(".sib-country-block").on("click",(function(){jQuery(".sib-country-list").toggle()})),jQuery(".sib-country-list").length>0&&jQuery(".sib-country-list").ready((function(){var s={action:"sib_get_country_prefix",security:ajax_sib_front_object.ajax_nonce};jQuery.post(ajax_sib_front_object.ajax_url,s,(function(s){jQuery(".sib-country-list").html(s)}))})),jQuery("body").on("click",(function(s){jQuery(".sib-sms-field .sib-country-list").length>0&&!jQuery(".sib-sms-field .sib-country-list").is(s.target)&&0===jQuery(".sib-sms-field .sib-country-list").has(s.target).length&&0===jQuery(".sib-sms-field .sib-country-block").has(s.target).length&&jQuery(".sib-sms-field .sib-country-list").hide()})),jQuery(".sib-country-list").on("click","li",(function(){var s=jQuery(this).data("country-code").toLowerCase(),e=jQuery(this).data("dial-code");jQuery(this).closest(".sib-sms-field").find(".sib-sms").val("+"+e),jQuery(this).closest(".sib-sms-field").find('input[name="sib_SMS_prefix"]').val("+"+e),jQuery(this).closest(".sib-sms-field").find(".sib-cflags").css("background-image","url("+ajax_sib_front_object.flag_url+s+".png)"),jQuery(this).closest(".sib-sms-field").find(".sib-cflags").data("dial-code",e),jQuery(this).closest(".sib-country-list").hide()})),jQuery(".sib-sms").on("keypress",(function(e){s(e,"sms")})),jQuery(".sib-date").on("keypress",(function(e){s(e,"date")}))})),jQuery.fn.serializeObject=function(){var s={},e=this.serializeArray();return jQuery.each(e,(function(){if("sib_form_action"==this.name||"sib_form_id"==this.name||"email"==this.name)return!0;void 0!==s[this.name]?(s[this.name].push||(s[this.name]=[s[this.name]]),s[this.name].push(this.value||"")):s[this.name]=this.value||""})),s},jQuery(document).ready((function(){jQuery(".sib-default-btn").on("click",(function(){var s=jQuery(this).closest(".sib_signup_form");sessionStorage.setItem("formIdRecapcha","#"+jQuery(s).attr("id"))}))}));