jQuery(document).ready((function(o){o(document.body).on("click",".um-user-bookmarks-add-button",(function(){var e=o(this),r=e.attr("data-post");if("1"!=e.attr("data-folders"))wp.ajax.send("um_bookmarks_modal_content",{data:{bookmark_post:r},beforeSend:function(){e.append('<i class="um-user-bookmarks-ajax-loading"></i>').attr("disabled",!0).css("cursor","wait")},success:function(r){e.css("cursor","pointer").removeAttr("disabled").find(".um-user-bookmarks-ajax-loading").remove(),o(".um-user-bookmarks-modal").show().find(".um-user-bookmarks-modal-content").html(r)},error:function(o){console.log(o)}});else{var a={post_id:r,_um_user_bookmarks_folder:"default",_wpnonce:e.attr("data-nonce"),action:"um_bookmarks_add"};wp.ajax.send({data:a,beforeSend:function(){e.append('<i class="um-user-bookmarks-ajax-loading"></i>').attr("disabled",!0).css("cursor","wait")},success:function(e){o('.um-user-bookmarks-button[data-post="'+r+'"]').closest(".um-clear").html(e)},error:function(o){console.log(o)}})}})),o(document.body).on("click",".um-user-bookmarks-remove-button",(function(){var e=o(this),r=e.data("nonce"),a=e.data("post"),s=wp.hooks.applyFilters("um_bookmarks_remove_button_args",{bookmark_post:a,return_button:!0,_nonce:r});wp.ajax.send("um_bookmarks_remove",{data:s,beforeSend:function(){e.append('<i class="um-user-bookmarks-ajax-loading"></i>').attr("disabled",!0).css("cursor","wait")},success:function(e){o('.um-user-bookmarks-button[data-post="'+a+'"]').closest(".um-clear").html(e)},error:function(o){console.log(o)}})})),o(document.body).on("change",".um_user_bookmarks_old_folder-radio",(function(){var e=o(this),r=e.parents("form"),a=r.find('[name="post_id"]').val(),s=wp.hooks.applyFilters("um_bookmarks_add_button_args",r.serialize());wp.ajax.send({data:s,beforeSend:function(){e.closest("form").addClass("um-disabled").attr("disabled",!0)},success:function(e){o(".um-user-bookmarks-modal").hide(),o('.um-user-bookmarks-button[data-post="'+a+'"]').closest(".um-clear").html(e)},error:function(o){console.log(o)}})})),o(document.body).on("click",".um_user_bookmarks_create_folder_btn",(function(e){e.preventDefault();var r=o(this),a=o(".um-user-bookmarks-modal");if(!r.hasClass("busy")){var s=r.parents("#form-um-new-folder-bookmark"),n=s.find('[name="_um_user_bookmarks_folder"]');if(s.find(".error").removeClass("error"),s.find(".error-message").hide(),""===o.trim(n.val()))return n.addClass("error"),void n.parent("td").find(".error-message").show();var t=s.find('[name="post_id"]').val(),d=r.html();r.addClass("busy").html("..."),s.find(".form-response").html("");var m=wp.hooks.applyFilters("um_bookmarks_add_button_args",s.serialize());wp.ajax.send({data:m,success:function(e){a.find("form").remove(),a.find(".um-user-bookmarks-modal-content").find(".um-user-bookmarks-modal-heading").remove(),a.find(".um-user-bookmarks-modal-content").append('<h1 style="text-align:center;"><i class="um-faicon-check"></i> '+wp.i18n.__("Successful","um-user-bookmarks")+"</h1>"),setTimeout((function(){o(".um-user-bookmarks-modal").hide()}),1e3),o('.um-user-bookmarks-button[data-post="'+t+'"]').closest(".um-clear").html(e)},error:function(o){console.log(o),s.find(".form-response").html(o),r.removeClass("busy").html(d)}})}})),o(document.body).on("click",".um-user-bookmarks-profile-remove-link",(function(){var e=o(this).css("cursor","wait"),r=e.data("nonce"),a=e.data("id");wp.ajax.send("um_bookmarks_remove",{data:{bookmark_post:a,_nonce:r},beforeSend:function(){e.append('<i class="um-user-bookmarks-ajax-loading"></i>').attr("disabled",!0).css("cursor","wait")},success:function(o){e.parents(".um-user-bookmarked-item").remove()},error:function(o){console.log(o)}})})),o(document.body).on("click",".um-user-bookmarks-cancel-btn",(function(){var e='<a href="javascript:void(0);" class="um-user-bookmarks-cancel-btn">&times;</a>'+wp.i18n.__("Loading..","um-user-bookmarks");o("body").find(".um-user-bookmarks-modal").hide().find(".um-user-bookmarks-modal-content").html(e)})),o(document.body).on("click","#um-bookmarks-profile-add-folder",(function(){o(this).parents(".um-user-bookmarks-profile-add-folder-holder").find("form").toggleClass("show"),o(this).find("i.icon").toggleClass("um-faicon-angle-down um-faicon-angle-up")})),o(document.body).on("click",".um_user_bookmarks_profile_create_folder_btn",(function(e){e.preventDefault();var r=o(this);if(!r.hasClass("busy")){var a=r.parents("#um-user-bookmarks-profile-add-folder-form"),s=a.find('[name="_um_user_bookmarks_folder"]');if(a.find(".error").removeClass("error"),a.find(".error-message").hide(),""===o.trim(s.val()))return s.addClass("error"),void s.parent(".um_bookmarks_td").find(".error-message").show();var n=r.html();r.addClass("busy").html("..."),a.find(".form-response").html(""),wp.ajax.send({data:a.serialize(),success:function(o){location.reload()},error:function(o){console.log(o),a.find(".form-response").html(o),r.removeClass("busy").html(n)}})}})),o(document.body).on("click",".um-user-bookmarks-folder, .um-user-bookmarks-folder-back",(function(){var e=o(this),r=e.data("nonce"),a=e.data("profile"),s=e.data("folder_key"),n=e.parents(".um-profile-body");n.html('<div style="text-align:center;"><p class="um-user-bookmarks-ajax-loading"></p></div>'),wp.ajax.send("um_bookmarks_view_folder",{data:{key:s,profile_id:a,_nonce:r},success:function(o){n.html(o)},error:function(o){console.log(o)}})})),o(document.body).on("click",".um-user-bookmarks-folder-edit",(function(){var e=o(this),r=e.data("folder_key"),a=e.data("profile"),s=e.data("nonce"),n=e.parents(".um-profile-body");n.html('<div style="text-align:center;"><p class="um-user-bookmarks-ajax-loading"></p></div>'),wp.ajax.send("um_bookmarks_view_edit_folder",{data:{key:r,user:a,_nonce:s},success:function(o){n.html(o)},error:function(o){console.log(o)}})})),o(document.body).on("click",".um-user-bookmarks-folder-delete",(function(){var e=o(this),r=e.parents(".um-profile-body"),a=e.attr("data-alert_text");confirm(a)&&wp.ajax.send("um_bookmarks_delete_folder",{data:{key:e.data("folder_key"),_nonce:e.data("nonce")},success:function(o){r.html('<div style="text-align:center;"><p class="um-user-bookmarks-ajax-loading"></p></div>'),wp.ajax.send("um_bookmarks_get_folder_view",{data:{profile_id:e.data("profile"),_nonce:e.data("callback-nonce")},success:function(o){r.html(o)},error:function(o){console.log(o)}})},error:function(o){console.log(o)}})})),o(document.body).on("click",".um-user-bookmarks-back-btn",(function(){var e=o(this),r=e.data("profile"),a=e.data("nonce"),s=e.parents(".um-profile-body");s.html('<div style="text-align:center;"><p class="um-user-bookmarks-ajax-loading"></p></div>'),wp.ajax.send("um_bookmarks_get_folder_view",{data:{profile_id:r,_nonce:a},success:function(o){s.html(o)},error:function(o){console.log(o)}})})),o(document.body).on("click",".um_user_bookmarks_action_folder_update",(function(e){e.preventDefault();var r=o(this),a=r.parents("form.um-user-bookmarks-edit-folder-form"),s=a.find('[name="folder_title"]');if(a.find(".error-message").hide(),""!==o.trim(s.val())){var n=r.parents(".um-profile-body");wp.ajax.send({data:a.serialize(),success:function(o){n.find(".um-user-bookmarks-folder-back").data("folder_key",o.slug).trigger("click")},error:function(o){console.log(o),a.find(".form-response").html(o)}})}else s.parent("p").find(".error-message").show()})),o(document.body).on("click",".um-user-bookmarks-dropdown-hide",(function(){return UM.dropdown.hideAll(),!1}))}));